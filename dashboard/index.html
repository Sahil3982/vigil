<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Vigil - Comprehensive System Dashboard</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="style.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/luxon@3.3.0/build/global/luxon.min.js"></script>
</head>
<body>
  <div class="container">
    <!-- Header -->
    <header class="header">
      <div class="header-title">
        <h1><i class="fas fa-heartbeat"></i> Vigil Dashboard</h1>
        <div class="system-info">
          <span id="hostname">Loading...</span>
          <span id="uptime">Uptime: --</span>
        </div>
      </div>
      <div class="header-controls">
        <div class="refresh-control">
          <span>Update:</span>
          <select id="refreshInterval">
            <option value="1000">1 sec</option>
            <option value="2000">2 sec</option>
            <option value="5000" selected>5 sec</option>
            <option value="10000">10 sec</option>
            <option value="30000">30 sec</option>
          </select>
          <button id="pauseBtn"><i class="fas fa-pause"></i> Pause</button>
        </div>
        <div class="timestamp" id="timestamp">Loading...</div>
      </div>
    </header>

    <!-- Alert Panel -->
    <div class="alert-panel" id="alertPanel">
      <div class="alert-header">
        <h3><i class="fas fa-exclamation-triangle"></i> Alerts</h3>
        <span class="alert-count" id="alertCount">0</span>
      </div>
      <div class="alert-list" id="alertList">
        <div class="no-alerts">No active alerts</div>
      </div>
    </div>

    <!-- Main Metrics Grid -->
    <div class="metrics-grid">
      <!-- CPU Section -->
      <div class="metric-card cpu-card">
        <div class="metric-header">
          <h2><i class="fas fa-microchip"></i> CPU</h2>
          <div class="metric-stats">
            <span id="cpu-cores">Cores: --</span>
            <span id="cpu-freq">Freq: --</span>
          </div>
        </div>
        <div class="metric-body">
          <div class="gauge-container">
            <canvas id="cpuGauge" width="200" height="120"></canvas>
            <div class="gauge-value" id="cpu-value">--%</div>
          </div>
          <div class="load-average">
            <div class="load-item">
              <span>1 min</span>
              <span id="load-1">--</span>
            </div>
            <div class="load-item">
              <span>5 min</span>
              <span id="load-5">--</span>
            </div>
            <div class="load-item">
              <span>15 min</span>
              <span id="load-15">--</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Memory Section -->
      <div class="metric-card memory-card">
        <div class="metric-header">
          <h2><i class="fas fa-memory"></i> Memory</h2>
          <div class="metric-stats">
            <span id="mem-total">Total: -- GB</span>
          </div>
        </div>
        <div class="metric-body">
          <div class="progress-container">
            <div class="progress-labels">
              <span>Used</span>
              <span id="mem-value">--%</span>
              <span>Free</span>
            </div>
            <div class="progress-bar">
              <div class="progress-fill" id="mem-bar"></div>
            </div>
            <div class="memory-details">
              <div class="detail-item">
                <span class="detail-label">Used:</span>
                <span class="detail-value" id="mem-used">-- GB</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">Available:</span>
                <span class="detail-value" id="mem-available">-- GB</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">Cached:</span>
                <span class="detail-value" id="mem-cached">-- GB</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">Swap:</span>
                <span class="detail-value" id="mem-swap">--%</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Disk Section -->
      <div class="metric-card disk-card">
        <div class="metric-header">
          <h2><i class="fas fa-hdd"></i> Disk</h2>
          <div class="metric-stats">
            <span id="disk-mount">Mount: /</span>
          </div>
        </div>
        <div class="metric-body">
          <div class="progress-container">
            <div class="progress-labels">
              <span>Used</span>
              <span id="disk-value">--%</span>
              <span>Free</span>
            </div>
            <div class="progress-bar">
              <div class="progress-fill" id="disk-bar"></div>
            </div>
            <div class="disk-details">
              <div class="detail-item">
                <span class="detail-label">Used:</span>
                <span class="detail-value" id="disk-used">-- GB</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">Free:</span>
                <span class="detail-value" id="disk-free">-- GB</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">Total:</span>
                <span class="detail-value" id="disk-total">-- GB</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">Inodes:</span>
                <span class="detail-value" id="disk-inodes">--%</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Network Section -->
      <div class="metric-card network-card">
        <div class="metric-header">
          <h2><i class="fas fa-network-wired"></i> Network</h2>
          <div class="metric-stats">
            <span id="network-interface">Interface: --</span>
          </div>
        </div>
        <div class="metric-body">
          <div class="network-stats">
            <div class="network-item upload">
              <i class="fas fa-upload"></i>
              <div>
                <span class="network-label">Upload</span>
                <span class="network-value" id="network-tx">-- MB/s</span>
              </div>
            </div>
            <div class="network-item download">
              <i class="fas fa-download"></i>
              <div>
                <span class="network-label">Download</span>
                <span class="network-value" id="network-rx">-- MB/s</span>
              </div>
            </div>
          </div>
          <div class="network-details">
            <div class="detail-row">
              <span>Packets Sent:</span>
              <span id="network-packets-sent">--</span>
            </div>
            <div class="detail-row">
              <span>Packets Received:</span>
              <span id="network-packets-recv">--</span>
            </div>
            <div class="detail-row">
              <span>Errors:</span>
              <span id="network-errors">--</span>
            </div>
            <div class="detail-row">
              <span>Drops:</span>
              <span id="network-drops">--</span>
            </div>
          </div>
        </div>
      </div>

      <!-- System Info Section -->
      <div class="metric-card system-card">
        <div class="metric-header">
          <h2><i class="fas fa-info-circle"></i> System Info</h2>
        </div>
        <div class="metric-body">
          <div class="system-details">
            <div class="info-item">
              <i class="fas fa-server"></i>
              <div>
                <span class="info-label">OS</span>
                <span class="info-value" id="system-os">--</span>
              </div>
            </div>
            <div class="info-item">
              <i class="fas fa-code-branch"></i>
              <div>
                <span class="info-label">Kernel</span>
                <span class="info-value" id="system-kernel">--</span>
              </div>
            </div>
            <div class="info-item">
              <i class="fas fa-cogs"></i>
              <div>
                <span class="info-label">Platform</span>
                <span class="info-value" id="system-platform">--</span>
              </div>
            </div>
            <div class="info-item">
              <i class="fas fa-microchip"></i>
              <div>
                <span class="info-label">Architecture</span>
                <span class="info-value" id="system-arch">--</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Go Runtime Section -->
      <div class="metric-card runtime-card">
        <div class="metric-header">
          <h2><i class="fab fa-golang"></i> Go Runtime</h2>
        </div>
        <div class="metric-body">
          <div class="runtime-stats">
            <div class="runtime-item">
              <span class="runtime-label">Goroutines:</span>
              <span class="runtime-value" id="go-goroutines">--</span>
            </div>
            <div class="runtime-item">
              <span class="runtime-label">CGO Calls:</span>
              <span class="runtime-value" id="go-cgo">--</span>
            </div>
            <div class="runtime-item">
              <span class="runtime-label">Heap:</span>
              <span class="runtime-value" id="go-heap">-- MB</span>
            </div>
            <div class="runtime-item">
              <span class="runtime-label">Stack:</span>
              <span class="runtime-value" id="go-stack">-- MB</span>
            </div>
            <div class="runtime-item">
              <span class="runtime-label">GC Count:</span>
              <span class="runtime-value" id="go-gc-count">--</span>
            </div>
            <div class="runtime-item">
              <span class="runtime-label">Processes:</span>
              <span class="runtime-value" id="go-processes">--</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Charts Section -->
    <div class="charts-section">
      <div class="chart-card">
        <div class="chart-header">
          <h3><i class="fas fa-chart-line"></i> CPU Usage History</h3>
          <select id="cpuHistoryRange">
            <option value="5">5 min</option>
            <option value="15">15 min</option>
            <option value="30" selected>30 min</option>
            <option value="60">1 hour</option>
          </select>
        </div>
        <div class="chart-container">
          <canvas id="cpuHistoryChart"></canvas>
        </div>
      </div>

      <div class="chart-card">
        <div class="chart-header">
          <h3><i class="fas fa-chart-area"></i> Memory Usage History</h3>
          <select id="memoryHistoryRange">
            <option value="5">5 min</option>
            <option value="15">15 min</option>
            <option value="30" selected>30 min</option>
            <option value="60">1 hour</option>
          </select>
        </div>
        <div class="chart-container">
          <canvas id="memoryHistoryChart"></canvas>
        </div>
      </div>
    </div>

    <!-- Process Table -->
    <div class="process-section">
      <div class="section-header">
        <h3><i class="fas fa-tasks"></i> Top Processes</h3>
        <button id="refreshProcesses"><i class="fas fa-sync-alt"></i> Refresh</button>
      </div>
      <div class="table-container">
        <table id="processTable">
          <thead>
            <tr>
              <th>PID</th>
              <th>Name</th>
              <th>CPU %</th>
              <th>Memory</th>
              <th>RSS</th>
              <th>VMS</th>
            </tr>
          </thead>
          <tbody id="processTableBody">
            <tr><td colspan="6">Loading processes...</td></tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- JavaScript -->
  <script src="script.js"></script>
  <script src="charts.js"></script>
</body>
</html>